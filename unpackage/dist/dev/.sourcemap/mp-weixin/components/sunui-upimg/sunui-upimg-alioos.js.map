{"version":3,"sources":["webpack:///C:/Users/simplett/Desktop/lanzeapp/components/sunui-upimg/sunui-upimg-alioos.vue?aaa9","webpack:///C:/Users/simplett/Desktop/lanzeapp/components/sunui-upimg/sunui-upimg-alioos.vue?fa8e","webpack:///C:/Users/simplett/Desktop/lanzeapp/components/sunui-upimg/sunui-upimg-alioos.vue?5740","webpack:///C:/Users/simplett/Desktop/lanzeapp/components/sunui-upimg/sunui-upimg-alioos.vue?7cc1","webpack:///C:/Users/simplett/Desktop/lanzeapp/components/sunui-upimg/sunui-upimg-alioos.vue","webpack:///C:/Users/simplett/Desktop/lanzeapp/components/sunui-upimg/sunui-upimg-alioos.vue?6ade","webpack:///C:/Users/simplett/Desktop/lanzeapp/components/sunui-upimg/sunui-upimg-alioos.vue?b259"],"names":["env","require","base64","Crypto","data","upload_after_list","upload_picture_list","name","props","upImgConfig","type","Object","created","methods","initServerImage","e","chooseImage","count","cImage","parseInt","uploadimage","uImage","deleteImg","dImage","previewImg","pImage","previewImgs","puImage","getPolicyBase64","date","Date","setHours","getHours","timeout","srcT","toISOString","policyText","policyBase64","encode","JSON","stringify","getSignature","_this","accesskey","aliConfig","AccessKeySecret","bytes","HMAC","SHA1","asBytes","signature","util","bytesToBase64","upload_file_server","configs","j","aliyunFileKey","oosDirectory","getTime","Math","floor","random","aliyunServerURL","url","accessid","OSSAccessKeyId","oos","uni","uploadFile","filePath","formData","success","res","statusCode","filename","console","log","$emit","hideLoading","showLoading","title","setTimeout","warn","fail","err","upload_task","onProgressUpdate","i","len","length","progress","config","currentTarget","dataset","index","splice","tips","notli","sourceType","sizeType","undefined","tempFiles","push","slice","fImage","concat","tempFilePaths","previewImage","current","urls","prevImgArr","path_server","src"],"mappings":"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","file":"components/sunui-upimg/sunui-upimg-alioos.js","sourcesContent":["import { render, staticRenderFns } from \"./sunui-upimg-alioos.vue?vue&type=template&id=24fe0bed&scoped=true&name=sunui-upimg&\"\nimport script from \"./sunui-upimg-alioos.vue?vue&type=script&lang=js&\"\nexport * from \"./sunui-upimg-alioos.vue?vue&type=script&lang=js&\"\nimport style0 from \"./sunui-upimg-alioos.vue?vue&type=style&index=0&id=24fe0bed&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"24fe0bed\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('24fe0bed', component.options)\n    } else {\n      api.reload('24fe0bed', component.options)\n    }\n    module.hot.accept(\"./sunui-upimg-alioos.vue?vue&type=template&id=24fe0bed&scoped=true&name=sunui-upimg&\", function () {\n      api.rerender('24fe0bed', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/simplett/Desktop/lanzeapp/components/sunui-upimg/sunui-upimg-alioos.vue\"\nexport default component.exports","export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sunui-upimg-alioos.vue?vue&type=template&id=24fe0bed&scoped=true&name=sunui-upimg&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sunui-upimg-alioos.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sunui-upimg-alioos.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nconst env = require('./ali-oos/config.js'); //配置文件，在这文件里配置你的OSS keyId和KeySecret,timeout:87600;\nconst base64 = require('./ali-oos/base64.js'); //Base64,hmac,sha1,crypto相关算法\nrequire('./ali-oos/hmac.js');\nrequire('./ali-oos/sha1.js');\nconst Crypto = require('./ali-oos/crypto.js');\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tupload_after_list: [],\n\t\t\tupload_picture_list: []\n\t\t};\n\t},\n\tname: 'sunui-upimg',\n\tprops: {\n\t\tupImgConfig: {\n\t\t\ttype: Object\n\t\t}\n\t},\n\tcreated() {},\n\tmethods: {\n\t\tinitServerImage(e) {\n\t\t\tthis.upload_picture_list = e;\n\t\t},\n\t\tchooseImage(count) {\n\t\t\tcImage(this, parseInt(count), this.upImgConfig);\n\t\t},\n\t\tuploadimage(e) {\n\t\t\tuImage(this, e);\n\t\t},\n\t\tdeleteImg(e) {\n\t\t\tdImage(e, this);\n\t\t},\n\t\tpreviewImg(e) {\n\t\t\tpImage(e, this);\n\t\t},\n\t\tpreviewImgs(e) {\n\t\t\tpuImage(e, this);\n\t\t}\n\t}\n\n}\nconst getPolicyBase64 = () => {\n\tlet date = new Date();\n\tdate.setHours(date.getHours() + env.timeout);\n\tlet srcT = date.toISOString();\n\tconst policyText = {\n\t\t\"expiration\": srcT,\n\t\t\"conditions\": [\n\t\t\t[\"content-length-range\", 0, 5 * 1024 * 1024] //上传容量最大为5M\n\t\t]\n\t};\n\tconst policyBase64 = base64.encode(JSON.stringify(policyText));\n\treturn policyBase64;\n}\nconst getSignature = (_this, policyBase64) => {\n\tconst accesskey = _this.upImgConfig.aliConfig.AccessKeySecret || env.AccessKeySecret;\n\tconst bytes = Crypto.HMAC(Crypto.SHA1, policyBase64, accesskey, {\n\t\tasBytes: true\n\t});\n\tconst signature = Crypto.util.bytesToBase64(bytes);\n\treturn signature;\n}\n\n// 上传文件\nconst upload_file_server = async (_this, configs, upload_picture_list, j) => {\n\tlet aliConfig = {\n\t\taliyunFileKey: `${configs.aliConfig.oosDirectory}/` + new Date().getTime() + Math.floor(Math.random() *\n\t\t\t\t150) +\n\t\t\t'.png',\n\t\taliyunServerURL: configs.aliConfig.url,\n\t\taccessid: configs.aliConfig.OSSAccessKeyId,\n\t\turl: configs.aliConfig.url || \"\",\n\t\toos: configs.aliConfig.oos || false\n\t}\n\n\tconst aliyunFileKey = aliConfig.aliyunFileKey ? aliConfig.aliyunFileKey : \"\";\n\tconst aliyunServerURL = aliConfig.aliyunServerURL ? aliConfig.aliyunServerURL : \"\";\n\tconst accessid = aliConfig.accessid ? aliConfig.accessid : \"\";\n\tconst policyBase64 = getPolicyBase64();\n\tconst signature = getSignature(_this, policyBase64);\n\n\n\tconst upload_task = await uni.uploadFile({\n\t\turl: aliConfig.url,\n\t\tfilePath: upload_picture_list[j]['path'],\n\t\tname: 'file',\n\t\tformData: {\n\t\t\t'key': aliyunFileKey,\n\t\t\t'policy': policyBase64,\n\t\t\t'OSSAccessKeyId': accessid,\n\t\t\t'signature': signature,\n\t\t\t'success_action_status': '200',\n\t\t},\n\t\tasync success(res) {\n\t\t\tif (res.statusCode == 200) {\n\t\t\t\t// console.log('打印后端反馈的信息:',data);\n\t\t\t\t// 先获取图片url(各个后端返回值不一，所以造成出入)\n\t\t\t\t// 修改获取的图片返回值路径\n\t\t\t\t// 提示：data.info改为你图片返回地址即可\n\t\t\t\tlet filename = aliyunServerURL + aliyunFileKey;\n\t\t\t\tconsole.log(`%c 阿里云上传(成功返回地址):${filename}`, 'color:#1AAD19');\n\t\t\t\tupload_picture_list[j]['path_server'] = filename;\n\t\t\t\t_this.upload_picture_list = upload_picture_list;\n\t\t\t\tawait _this.$emit('onUpImg', _this.upload_picture_list);\n\t\t\t\tuni.hideLoading();\n\t\t\t} else {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: `上传失败!`\n\t\t\t\t});\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t}, 2000);\n\t\t\t\t_this.upload_picture_list = [];\n\t\t\t\t_this.upload_after_list = [];\n\t\t\t\tconsole.warn(`阿里云上传图片失败,返回状态码:`, res.statusCode);\n\t\t\t}\n\t\t},\n\t\tasync fail(err) {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: `上传失败!`\n\t\t\t});\n\t\t\tsetTimeout(() => {\n\t\t\t\tuni.hideLoading();\n\t\t\t}, 2000);\n\t\t\tconsole.log(err);\n\t\t}\n\t});\n\tupload_task.onProgressUpdate(async (res) => {\n\t\tfor (let i = 0, len = _this.upload_picture_list.length; i < len; i++) {\n\t\t\tupload_picture_list[i]['upload_percent'] = await res.progress;\n\t\t}\n\t\t_this.upload_picture_list = upload_picture_list\n\t});\n}\n\n// 上传图片(通用)\nconst uImage = async (_this, config) => {\n\tfor (let j = 0, len = _this.upload_picture_list.length; j < len; j++) {\n\t\tif (_this.upload_picture_list[j]['upload_percent'] == 0) {\n\t\t\tawait upload_file_server(_this, config, _this.upload_picture_list, j)\n\t\t}\n\t}\n}\n\n// 删除图片(通用)\nconst dImage = async (e, _this) => {\n\tawait _this.$emit('onImgDel', {\n\t\turl: e.currentTarget.dataset.url,\n\t\tindex: e.currentTarget.dataset.index\n\t});\n\t_this.upload_picture_list.splice(e.currentTarget.dataset.index, 1);\n\t_this.upload_after_list.splice(e.currentTarget.dataset.index, 1);\n\t_this.upload_picture_list = _this.upload_picture_list;\n}\n\n\n// 选择图片(通用)\nconst cImage = (_this, count, configs) => {\n\tlet config = {\n\t\taliConfig: {\n\t\t\tAccessKeySecret: configs.aliConfig.AccessKeySecret,\n\t\t\tOSSAccessKeyId: configs.aliConfig.OSSAccessKeyId,\n\t\t\toosDirectory: configs.aliConfig.oosDirectory,\n\t\t\turl: configs.aliConfig.url\n\t\t},\n\t\tcount,\n\t\ttips: configs.tips || false,\n\t\tnotli: configs.notli,\n\t\tsourceType: configs.sourceType,\n\t\tsizeType: configs.sizeType\n\t}\n\tuni.chooseImage({\n\t\tcount: config.notli ? config.count = 9 : _this.upload_after_list.length == 0 ? config.count : config.count -\n\t\t\t_this.upload_after_list.length,\n\t\tsizeType: config.sizeType == \"\" || config.sizeType == undefined || config.sizeType == true ? ['compressed'] : [\n\t\t\t'original'\n\t\t],\n\t\tsourceType: config.sourceType == \"\" || config.sourceType == undefined ? ['album', 'camera'] : config.sourceType ==\n\t\t\t'camera' ? ['camera'] : config.sourceType == 'album' ? ['album'] : ['album', 'camera'],\n\t\tsuccess: async (res) => {\n\t\t\tfor (let i = 0, len = res.tempFiles.length; i < len; i++) {\n\t\t\t\tres.tempFiles[i]['upload_percent'] = 0;\n\t\t\t\tres.tempFiles[i]['path_server'] = '';\n\t\t\t\t_this.upload_picture_list.push(res.tempFiles[i]);\n\t\t\t\t_this.upload_picture_list.length > config.count ? _this.upload_picture_list = _this.upload_picture_list.slice(\n\t\t\t\t\t0,\n\t\t\t\t\tconfig.count) : '';\n\t\t\t}\n\t\t\t// 过滤多出的预览图片\n\t\t\tawait fImage(_this, res, config);\n\t\t}\n\t})\n}\n\n\n// 过滤超出的图片以及上传(通用)\nconst fImage = (_this, res, config) => {\n\t!config.notli && config.count == _this.upload_picture_list.length ? uImage(_this, config) : '';\n\tconfig.notli && config.count == 9 ? uImage(_this, config) : '';\n\t_this.upload_after_list = _this.upload_after_list.concat(res.tempFilePaths).slice(0, config.count);\n\t_this.upload_picture_list = _this.upload_picture_list.slice(0, config.count);\n}\n\n\n\n// 上传前预览图片(通用)\nconst pImage = (e, _this) => {\n\tuni.previewImage({\n\t\tcurrent: _this.upload_after_list[e.currentTarget.dataset.index],\n\t\turls: _this.upload_after_list\n\t})\n}\n\n// 上传后预览(通用)\nconst puImage = async (e, _this) => {\n\tlet prevImgArr = [];\n\tfor (let i = 0, len = _this.upload_picture_list.length; i < len; i++) {\n\t\tprevImgArr.push(_this.upload_picture_list[i].path_server);\n\t}\n\tuni.previewImage({\n\t\tcurrent: e.currentTarget.dataset.src,\n\t\turls: prevImgArr\n\t});\n}\n","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sunui-upimg-alioos.vue?vue&type=style&index=0&id=24fe0bed&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sunui-upimg-alioos.vue?vue&type=style&index=0&id=24fe0bed&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}