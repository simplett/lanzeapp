<view><view data-event-opts="{{[['touchstart',[['hideEmoji',['$event']]]]]}}" class="content" bindtouchstart="__e"><scroll-view class="msg-list" scroll-y="true" lower-threshold="{{50}}" scroll-with-animation="{{scrollAnimation}}" scroll-top="{{scrollTop}}" data-event-opts="{{[['scrolltolower',[['init']]]]}}" bindscrolltolower="__e"><block wx:for="{{messgedata[1]}}" wx:for-item="row" wx:for-index="index" wx:key="index"><view class="row"><block wx:if="{{row['user']=='me'}}"><view class="my"><view class="left"><view class="bubble"><rich-text nodes="{{row['msg']}}"></rich-text></view></view><view class="right"><image src="{{myface}}"></image></view></view></block><block wx:if="{{row.user=='you'}}"><view class="other"><view class="left"><image src="{{youface}}"></image></view><view class="right"><view class="username"><view class="name">{{row.username}}</view><view class="time">{{messgedata[0][index]}}</view></view><view class="bubble"><rich-text nodes="{{row['msg']}}"></rich-text></view></view></view></block></view></block></scroll-view></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]]]}}" class="{{['emoji-box',showEmji]}}" catchtouchmove="__e"><swiper class="swiper" indicator-dots="true" duration="150"><block wx:for="{{emojiList}}" wx:for-item="page" wx:for-index="pid" wx:key="pid"><swiper-item><block wx:for="{{page}}" wx:for-item="em" wx:for-index="eid" wx:key="eid"><view data-event-opts="{{[['tap',[['addEmoji',['$0'],[[['emojiList','',pid],['','',eid]]]]]]]}}" bindtap="__e"><image mode="widthFix" src="{{'/static/img/emoji/'+em.url}}"></image></view></block></swiper-item></block></swiper></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]]]}}" class="{{['input-box',showEmji]}}" catchtouchmove="__e"><view class="voice"><view data-event-opts="{{[['tap',[['switchVoice',['$event']]]]]}}" class="{{['icon',isVoice?'jianpan':'yuyin']}}" bindtap="__e"></view></view><view class="textbox"><view data-event-opts="{{[['touchstart',[['voiceBegin',['$event']]]],['touchmove',[['voiceIng',['$event']]]],['touchend',[['voiceEnd',['$event']]]],['touchcancel',[['voiceCancel',['$event']]]]]}}" class="{{['voice-mode',isVoice?'':'hidden',recording?'recording':'']}}" bindtouchstart="__e" catchtouchmove="__e" bindtouchend="__e" bindtouchcancel="__e">{{voiceTis}}</view><view class="{{['text-mode',isVoice?'hidden':'']}}"><view class="box"><textarea auto-height="true" id="textMsg" data-event-opts="{{[['input',[['__set_model',['','textMsg','$event',[]]]]]]}}" value="{{textMsg}}" bindinput="__e"></textarea></view><view data-event-opts="{{[['tap',[['chooseEmoji',['$event']]]]]}}" class="em" bindtap="__e"><view class="icon biaoqing"></view></view></view></view><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="more" bindtap="__e"><view class="icon tupian"></view></view><label for="textMsg"><view data-event-opts="{{[['tap',[['sendText',['$event']]]]]}}" class="{{['send',isVoice?'hidden':'']}}" bindtap="__e"><view class="btn">发送</view></view></label></view><view class="{{['record',recording?'':'hidden']}}"><view class="{{['ing',willStop?'hidden':'']}}"><view class="icon luyin2"></view></view><view class="{{['cancel',willStop?'':'hidden']}}"><view class="icon chehui"></view></view><view class="{{['tis',willStop?'change':'']}}">{{recordTis}}</view></view></view>