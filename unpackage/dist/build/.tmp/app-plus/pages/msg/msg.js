(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/msg/msg"],{"367d":function(e,t,a){"use strict";a.r(t);var s=a("baf3"),i=a.n(s);for(var u in s)"default"!==u&&function(e){a.d(t,e,function(){return s[e]})}(u);t["default"]=i.a},"6cf9":function(e,t,a){"use strict";(function(e){a("590e"),a("921b");s(a("66fd"));var t=s(a("9c08"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])},"7b35":function(e,t,a){"use strict";var s=a("a9d2"),i=a.n(s);i.a},"9c08":function(e,t,a){"use strict";a.r(t);var s=a("9f88"),i=a("367d");for(var u in i)"default"!==u&&function(e){a.d(t,e,function(){return i[e]})}(u);a("7b35");var n=a("2877"),c=Object(n["a"])(i["default"],s["a"],s["b"],!1,null,null,null);t["default"]=c.exports},"9f88":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c},i=[];a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i})},a9d2:function(e,t,a){},baf3:function(e,t,a){"use strict";(function(e,a){function s(e){return n(e)||u(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function n(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c={data:function(){return{SUMMSG:{},chatList:[{uid:1,username:"鲜果蔬专营店",face:"/static/img/im/face/face_1.jpg",time:"13:08",msg:"亲，20点前下单都是当天送达的",tisNum:1},{uid:2,username:"官店大欺客旗舰店",face:"/static/img/im/face/face_2.jpg",time:"13:05",msg:"问那么多干什么？不想买就滚~",tisNum:0},{uid:3,username:"妙不可言",face:"/static/img/im/face/face_3.jpg",time:"12:15",msg:"推荐一个商品呗？",tisNum:0},{uid:4,username:"茶叶专卖",face:"/static/img/im/face/face_4.jpg",time:"12:11",msg:"现在卖的都是未过青的茶哦",tisNum:0},{uid:5,username:"likeKiss客服",face:"/static/img/im/face/face_5.jpg",time:"12:10",msg:"你好，发福建快递多久送到的？",tisNum:0},{uid:6,username:"白开水",face:"/static/img/im/face/face_6.jpg",time:"12:10",msg:"在吗？",tisNum:0},{uid:7,username:"衣帽间的叹息",face:"/static/img/im/face/face_7.jpg",time:"11:56",msg:"新品上市，欢迎选购",tisNum:0},{uid:8,username:"景萧疏",face:"/static/img/im/face/face_8.jpg",time:"11:56",msg:"商品七天无理由退换的",tisNum:0},{uid:9,username:"文宁先生",face:"/static/img/im/face/face_9.jpg",time:"12:15",msg:"星期天再发货的",tisNum:0},{uid:10,username:"高端Chieh",face:"/static/img/im/face/face_10.jpg",time:"12:36",msg:"建议你直接先测量好尺码在选购的。",tisNum:0},{uid:11,username:"mode旗舰店",face:"/static/img/im/face/face_11.jpg",time:"12:40",msg:"新品5折，还有大量优惠券。",tisNum:0},{uid:12,username:"敏萘客服",face:"/static/img/im/face/face_12.jpg",time:"12:36",msg:"还没有用，等我明天早上试一下",tisNum:0},{uid:13,username:"春天里的花",face:"/static/img/im/face/face_13.jpg",time:"12:36",msg:"适用于成年人的，小孩不适用的",tisNum:0},{uid:14,username:"电脑外设专业户",face:"/static/img/im/face/face_13.jpg",time:"12:36",msg:"把上面的螺丝拆下来，把铁片撬开就能看见了",tisNum:0},{uid:15,username:"至善汽车用品",face:"/static/img/im/face/face_15.jpg",time:"12:36",msg:"这个产品是原车配件，完美装上的",tisNum:10}]}},onPullDownRefresh:function(){setTimeout(function(){e.stopPullDownRefresh()},1e3)},onLoad:function(){this.changedata(),this.getmymsg()},methods:{changedata:function(){var t=this;e.getStorage({key:"summsg",success:function(e){t.SUMMSG=e.data}})},getmymsg:function(){var t=this;setInterval(function(){console.log(a("请求聊天的数据"," at pages\\msg\\msg.vue:175"));var i="";e.getStorage({key:"token",success:function(e){i=e.data}}),i&&e.request({url:"http://120.79.19.253:10086/Chat",data:{token:i,type:"get"},success:function(i){console.log(a(i.data," at pages\\msg\\msg.vue:191"));var u=i.data.data,n={};if(u){console.log(a("收到的聊天消息",u," at pages\\msg\\msg.vue:195")),n=u.reduce(function(e,s){console.log(a(JSON.parse(s.message)," at pages\\msg\\msg.vue:198"));var i=JSON.parse(s.message);return void 0===e[i.suid]?(e[i.suid]=[[]],e[i.suid][0]=[],e[i.suid][1]=[],e[i.suid][2]="",e[i.suid][0].unshift(i.time),e[i.suid][1].unshift({user:"you",msg:i.message}),e[i.suid][2]=i.suid):(e[i.suid][0].unshift(i.time),e[i.suid][1].unshift({user:"you",msg:i.message}),console.log(a(t.tomsg," at pages\\msg\\msg.vue:223"))),e},{});var c={};for(var m in e.getStorage({key:"summsg",success:function(e){c=e.data}}),n)void 0==c[m]?(c[m]=[[]],console.log(a("@@@@@@@@@@@@@@@@@@@@@@@@@",m[0],m[1],m[2],m," at pages\\msg\\msg.vue:240")),c[m][0]=[],console.log(a("&&&&&&&&&&&&&&&&&&&&&",n[m][0]," at pages\\msg\\msg.vue:242")),c[m][1]=[],c[m][2]="",c[m][0]=s(n[m][0]),c[m][1]=s(n[m][1]),c[m][2]=n[m][2]):(c[m][0]=[].concat(s(c[m][0]),s(n[m][0])),c[m][1]=[].concat(s(c[m][1]),s(n[m][1])),c[m][2]=n[m][2]);var o=[],g=!0,r=!1,f=void 0;try{for(var d,l=c[Symbol.iterator]();!(g=(d=l.next()).done);g=!0){m=d.value;o.push({uid:m[2],time:m[0],msg:m[1]})}}catch(p){r=!0,f=p}finally{try{g||null==l.return||l.return()}finally{if(r)throw f}}e.setStorage({key:"summsg",data:c,success:function(e){console.log(a(数据插入成功," at pages\\msg\\msg.vue:263"))}}),console.log(a(c,"###################这是state.summsg############################"," at pages\\msg\\msg.vue:266")),console.log(a("聊天函数被触发"," at pages\\msg\\msg.vue:267")),t.changedata()}}})},500)},toChat:function(t){e.navigateTo({url:"chat/chat?name="+t.username})}}};t.default=c}).call(this,a("6e42")["default"],a("0de9")["default"])}},[["6cf9","common/runtime","common/vendor"]]]);